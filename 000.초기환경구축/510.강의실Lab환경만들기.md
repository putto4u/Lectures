IaC(Infrastructure as Code) ì›ì¹™ì— ë”°ë¼ Windows í˜¸ìŠ¤íŠ¸ í™˜ê²½ì„ ì„¤ì •í•˜ê³ , VirtualBoxì™€ Ubuntu LTS ê°€ìƒ ë¨¸ì‹ ê¹Œì§€ ìë™ êµ¬ì¶•í•˜ëŠ” ì „ì²´ ê³µì •ì„ ì •ë¦¬í•©ë‹ˆë‹¤. ëª¨ë“  ì‘ì—…ì€ WSL í™˜ê²½ì˜ Ansibleì—ì„œ ì œì–´í•˜ëŠ” ê²ƒì„ ê¸°ì¤€ìœ¼ë¡œ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.

---

## ğŸ› ï¸ ì „ì²´ êµ¬ì¶• ì ˆì°¨ ìš”ì•½ í‘œ

| ë‹¨ê³„ | ì‘ì—… êµ¬ë¶„ | ì£¼ìš” ë‚´ìš© | ìˆ˜í–‰ ë„êµ¬ |
| --- | --- | --- | --- |
| **1ë‹¨ê³„** | **í˜¸ìŠ¤íŠ¸ ì¤€ë¹„** | WSL2 ì„¤ì¹˜, Chocolatey ì„¤ì¹˜, WinRM í™œì„±í™” | PowerShell (Admin) |
| **2ë‹¨ê³„** | **ì œì–´ ë…¸ë“œ êµ¬ì¶•** | Ansible ì„¤ì¹˜, Windows ì ‘ì† ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì • | WSL (Ubuntu) |
| **3ë‹¨ê³„** | **Windows ìë™í™”** | master ê³„ì • ìƒì„±, VirtualBox/Vagrant/VS Code ì„¤ì¹˜ | Ansible Playbook |
| **4ë‹¨ê³„** | **ê°€ìƒ ë¨¸ì‹  í”„ë¡œë¹„ì €ë‹** | Ubuntu LTS VM ìƒì„± ë° ë‚´ë¶€ ê³„ì •(master/root) ì„¤ì • | Vagrant (Ruby/YAML) |
| **5ë‹¨ê³„** | **ìµœì¢… í™•ì¸** | SSH ì ‘ì† í…ŒìŠ¤íŠ¸ ë° ê¶Œí•œ í™•ì¸ | Terminal / SSH |

---

## 1ë‹¨ê³„: Windows í˜¸ìŠ¤íŠ¸ ê¸°ì´ˆ í™˜ê²½ ì„¤ì •

ê°€ì¥ ë¨¼ì € Ansibleì´ ì œì–´í•  ìˆ˜ ìˆëŠ” í†µë¡œë¥¼ ì—´ê³  íŒ¨í‚¤ì§€ ê´€ë¦¬ìë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.

1. **Chocolatey ì„¤ì¹˜**: ê´€ë¦¬ì ê¶Œí•œ PowerShellì—ì„œ ì‹¤í–‰
```powershell
Set-ExecutionPolicy Bypass -Scope Process -Force; [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; iex ((New-Object System.Net.WebClient).DownloadString('https://community.chocolatey.org/install.ps1'))

```


2. **WSL2 ë° Ubuntu ì„¤ì¹˜**:
```powershell
wsl --install

```


3. **WinRM(ì›ê²© ê´€ë¦¬) í™œì„±í™”**: Ansibleì˜ ì ‘ì†ì„ í—ˆìš©í•©ë‹ˆë‹¤.
```powershell
$url = "https://raw.githubusercontent.com/ansible/ansible/devel/examples/scripts/ConfigureRemotingForAnsible.ps1"
$file = "$env:temp\ConfigureRemotingForAnsible.ps1"
(New-Object -TypeName System.Net.WebClient).DownloadFile($url, $file)
powershell.exe -ExecutionPolicy Bypass -File $file

```



---

## 2ë‹¨ê³„: WSL ë‚´ë¶€ Ansible ì œì–´ í™˜ê²½ êµ¬ì¶•

Windows ë‚´ì˜ Ubuntu(WSL)ë¥¼ ì‹¤í–‰í•˜ì—¬ ì‹¤ì œ 'ì œì–´ ì—”ì§„'ì„ ì„¤ì¹˜í•©ë‹ˆë‹¤.

1. **Ansible ì„¤ì¹˜**:
```bash
sudo apt update && sudo apt install software-properties-common -y
sudo add-apt-repository --yes --update ppa:ansible/ansible
sudo apt install ansible python3-pip -y

```


2. **Windows ì ‘ì† ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜**:
```bash
pip3 install pywinrm

```



---

## 3ë‹¨ê³„: Windows ë§ˆìŠ¤í„° í™˜ê²½ ìë™ êµ¬ì¶• (Ansible)

ì´ì œ ì½”ë“œë¥¼ í†µí•´ Windowsì— `master` ê³„ì •ì„ ë§Œë“¤ê³  í•„ìš”í•œ í”„ë¡œê·¸ë¨ë“¤ì„ ì„¤ì¹˜í•©ë‹ˆë‹¤.

**`setup_windows.yml` ì‘ì„± ë° ì‹¤í–‰**

```yaml
---
- name: Windows Host Master Setup
  hosts: localhost
  connection: local  # WSLì—ì„œ ë¡œì»¬ ìœˆë„ìš°ë¥¼ ì œì–´í•  ê²½ìš° í™˜ê²½ì— ë”°ë¼ winrm ì„¤ì • í•„ìš”
  tasks:
    - name: 1. ê´€ë¦¬ì ê¶Œí•œì˜ master ê³„ì • ìƒì„±
      community.windows.win_user:
        name: master
        password: "jj968096"
        groups:
          - Administrators
        state: present

    - name: 2. Chocolateyë¥¼ ì´ìš©í•œ í•„ìˆ˜ í”„ë¡œê·¸ë¨ ì„¤ì¹˜
      community.windows.win_chocolatey:
        name:
          - virtualbox
          - vagrant
          - visualstudiocode
          - git
          - termius
        state: present

```

---

## 4ë‹¨ê³„: ê°€ìƒ ë¨¸ì‹ (VM) ìë™ ìƒì„± ë° ë‚´ë¶€ ì„¤ì • (Vagrant)

ì„¤ì¹˜ëœ Vagrantë¥¼ ì‚¬ìš©í•˜ì—¬ VirtualBox ìœ„ì— Ubuntu ì„œë²„ë¥¼ ì˜¬ë¦¬ê³  ê³„ì •ì„ ì„¤ì •í•©ë‹ˆë‹¤.

**`Vagrantfile` ì‘ì„± ë° ì‹¤í–‰ (`vagrant up`)**

```ruby
Vagrant.configure("2") do |config|
  # Ubuntu 24.04 LTS ì´ë¯¸ì§€ ì‚¬ìš©
  config.vm.box = "ubuntu/noble64" 
  
  config.vm.provider "virtualbox" do |vb|
    vb.name = "Master_Control_VM"
    vb.memory = "2048"
    vb.cpus = 2
  end

  # VM ë‚´ë¶€ master ê³„ì • ë° root íŒ¨ìŠ¤ì›Œë“œ ìë™í™”
  config.vm.provision "shell", inline: <<-SHELL
    # master ì‚¬ìš©ì ìƒì„± ë° ë¹„ë°€ë²ˆí˜¸ ì„¤ì •
    useradd -m -s /bin/bash master
    echo "master:12345678" | chpasswd
    usermod -aG sudo master

    # root ë¹„ë°€ë²ˆí˜¸ ì„¤ì •
    echo "root:12345678" | chpasswd

    # ì™¸ë¶€ SSH ì ‘ì† í—ˆìš© ì„¤ì •
    sed -i 's/PasswordAuthentication no/PasswordAuthentication yes/' /etc/ssh/sshd_config
    systemctl restart ssh
  SHELL
end

```

---

## 5ë‹¨ê³„: ìµœì¢… í™•ì¸ ë° ì ‘ì†

ëª¨ë“  ì„¤ì¹˜ê°€ ëë‚˜ë©´ ìƒì„±ëœ í™˜ê²½ì„ í™•ì¸í•©ë‹ˆë‹¤.

1. **Windows**: `master` ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸ ê°€ëŠ¥í•œì§€ í™•ì¸í•©ë‹ˆë‹¤.
2. **VM ì ‘ì†**: í„°ë¯¸ë„ì—ì„œ ì•„ë˜ ëª…ë ¹ì–´ë¡œ ì ‘ì†í•©ë‹ˆë‹¤.
```bash
ssh master@localhost -p 2222
# ë¹„ë°€ë²ˆí˜¸: 12345678

```


3. **Root ê¶Œí•œ í™•ì¸**:
```bash
su - root
# ë¹„ë°€ë²ˆí˜¸: 12345678

```



---

Next Step: í˜¸ìŠ¤íŠ¸-VM ê°„ ê³µìœ  í´ë” ì„¤ì • ë° ì•¤ì„œë¸” ë©±ë“±ì„± í…ŒìŠ¤íŠ¸

í™˜ê²½ êµ¬ì¶• ì ˆì°¨ | ì•¤ì„œë¸” í”Œë ˆì´ë¶ | ë² ì´ê·¸ë€íŠ¸ êµ¬ì„± | ì´ˆì½œë¦¿ íŒ¨í‚¤ì§€ ê´€ë¦¬

---

ìš”ì²­í•˜ì‹  ëŒ€ë¡œ ëª¨ë“  ì‘ì—…ì„ ìˆœì„œì— ë§ì¶° í†µí•© ì •ë¦¬í•˜ì˜€ìŠµë‹ˆë‹¤. íŠ¹íˆ Chocolateyë¥¼ ì´ìš©í•œ ìë™ ì„¤ì¹˜ì™€ WSL ê¸°ë°˜ì˜ Ansible ì œì–´ êµ¬ì¡°ë¥¼ ë°˜ì˜í•˜ì—¬ ì‹¤ë¬´ì ì¸ IaC í™˜ê²½ì´ êµ¬ì¶•ë˜ë„ë¡ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤. ë³¸ë¬¸ì— ì§€ì¹¨ ì™¸ì˜ ë¶ˆí•„ìš”í•œ ìˆ˜ì‹ì–´ëŠ” ë°°ì œí•˜ì˜€ìŠµë‹ˆë‹¤.

Windows ë§ˆìŠ¤í„° ê³„ì • | ì•¤ì„œë¸” ìë™í™” | ì´ˆì½œë¦¿ ì„¤ì¹˜ | ê°€ìƒí™” í™˜ê²½ êµ¬ì¶• ì™„ë£Œ
