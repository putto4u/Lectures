## VirtualBox ë° DevOps ë„êµ¬ í†µí•© ë°°í¬ í”„ë¡œì íŠ¸ (ê²ŒìŠ¤íŠ¸ ì—ë””ì…˜ í¬í•¨)

ê²ŒìŠ¤íŠ¸ ì—ë””ì…˜(Guest Additions)ì€ í™•ì¥íŒ©ê³¼ ë‹¬ë¦¬ **VM ë‚´ë¶€(Guest OS)ì— ì„¤ì¹˜**ë˜ì–´ì•¼ í•˜ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ì…ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ í˜¸ìŠ¤íŠ¸ PCì—ì„œ ê²ŒìŠ¤íŠ¸ ì—ë””ì…˜ ISO íŒŒì¼ì„ VMì— ì‚½ì…(Mount)í•˜ê³ , VM ë‚´ë¶€ì—ì„œ ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ëŠ” ê³¼ì •ì„ í”„ë¡œì íŠ¸ì— ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.

---

### 1. í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ êµ¬ì¡°

```text
ansible-devops-project/
â”œâ”€â”€ inventory/
â”‚   â””â”€â”€ hosts.ini            # ëŒ€ìƒ Windows í˜¸ìŠ¤íŠ¸ PC ë¦¬ìŠ¤íŠ¸
â”œâ”€â”€ vars/
â”‚   â””â”€â”€ main.yml             # ì„¤ì¹˜ ê²½ë¡œ, ë²„ì „ ë° ISO ì •ë³´
â””â”€â”€ site.yml                 # VC++, VBox, í™•ì¥íŒ©, VM, ê²ŒìŠ¤íŠ¸ ì—ë””ì…˜ í†µí•© í”Œë ˆì´ë¶

```

---

### 2. íŒŒì¼ë³„ ìƒì„¸ ë‚´ìš©

#### â‘  ì¸ë²¤í† ë¦¬ ì„¤ì • (`inventory/hosts.ini`)

```ini
[physical_pcs]
pc-01 ansible_host=192.168.1.10
pc-02 ansible_host=192.168.1.11

[physical_pcs:vars]
ansible_user=Administrator
ansible_password=YourPassword
ansible_connection=winrm
ansible_winrm_server_cert_validation=ignore

```

#### â‘¡ ë³€ìˆ˜ ì •ì˜ (`vars/main.yml`)

```yaml
# ì„ í–‰ í•„ìˆ˜ ë° VBox ê´€ë ¨
vcredist_url: "https://aka.ms/vs/17/release/vc_redist.x64.exe"
vbox_installer_url: "https://download.virtualbox.org/virtualbox/7.0.12/VirtualBox-7.0.12-159484-Win.exe"
ext_pack_url: "https://download.virtualbox.org/virtualbox/7.0.12/Oracle_VM_VirtualBox_Extension_Pack-7.0.12.vbox-extpack"
ext_pack_hash: "33d7284dc4a0ece278f985c002b881fd92b35887955e59824e5c0162dbf03d60"

# VM ë° ê²ŒìŠ¤íŠ¸ ì—ë””ì…˜ ì„¤ì •
vm_name: "DevOps-Master-VM"
vm_memory: 4096
vm_cpus: 2
# ê²ŒìŠ¤íŠ¸ ì—ë””ì…˜ ISOëŠ” ë³´í†µ VBox ì„¤ì¹˜ ê²½ë¡œì— í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
guest_additions_iso: "C:\\Program Files\\Oracle\\VirtualBox\\VBoxGuestAdditions.iso"

```

#### â‘¢ ë©”ì¸ í”Œë ˆì´ë¶ (`site.yml`)

VC++ ì„¤ì¹˜ë¶€í„° **ê²ŒìŠ¤íŠ¸ ì—ë””ì…˜ ISO ì‚½ì…** ë° ë‚´ë¶€ ë„êµ¬ ë°°í¬ê¹Œì§€ì˜ ì „ì²´ íë¦„ì…ë‹ˆë‹¤.

```yaml
---
- name: Windows í˜¸ìŠ¤íŠ¸ ê°€ìƒí™” ë° ê²ŒìŠ¤íŠ¸ ì—ë””ì…˜ í†µí•© êµ¬ì¶•
  hosts: physical_pcs
  vars_files:
    - vars/main.yml

  tasks:
    # [STEP 1] Visual C++ ëŸ°íƒ€ì„ ì„¤ì¹˜
    - name: Microsoft Visual C++ Redistributable ì„¤ì¹˜
      win_package:
        path: "{{ vcredist_url }}"
        arguments: /install /quiet /norestart
        state: present

    # [STEP 2] VirtualBox ë³¸ì²´ ë° í™•ì¥íŒ© ì„¤ì¹˜
    - name: VirtualBox ì„¤ì¹˜
      win_package:
        path: "{{ vbox_installer_url }}"
        arguments: /s
        state: present

    - name: í™•ì¥íŒ© ì„¤ì¹˜
      win_shell: |
        $vboxManage = "${env:ProgramFiles}\Oracle\VirtualBox\VBoxManage.exe"
        win_get_url -url "{{ ext_pack_url }}" -dest 'C:\Temp\extpack.vbox-extpack'
        & $vboxManage extpack install --replace --accept-license={{ ext_pack_hash }} 'C:\Temp\extpack.vbox-extpack'

    # [STEP 3] VM ìƒì„± ë° ê²ŒìŠ¤íŠ¸ ì—ë””ì…˜ ISO ì‚½ì…
    - name: VM ìƒì„± ë° í™˜ê²½ ìµœì í™” ì„¤ì •
      win_shell: |
        $vbox = "${env:ProgramFiles}\Oracle\VirtualBox\VBoxManage.exe"
        # VM ìƒì„± ë° ë“±ë¡
        & $vbox createvm --name "{{ vm_name }}" --register
        & $vbox modifyvm "{{ vm_name }}" --memory {{ vm_memory }} --cpus {{ vm_cpus }} --nic1 bridged
        
        # ìŠ¤í† ë¦¬ì§€ ì»¨íŠ¸ë¡¤ëŸ¬ ì¶”ê°€ ë° ê²ŒìŠ¤íŠ¸ ì—ë””ì…˜ ISO ë§ˆìš´íŠ¸
        & $vbox storagectl "{{ vm_name }}" --name "IDE Controller" --add ide
        & $vbox storageattach "{{ vm_name }}" --storagectl "IDE Controller" --port 0 --device 0 --type dvddrive --medium "{{ guest_additions_iso }}"

    # [STEP 4] VM ê¸°ë™ ë° ë‚´ë¶€ DevOps ë„êµ¬ ë°°í¬ (ê°œë…ì  ì½”ë“œ)
    - name: VM ë¶€íŒ… ë° ë‚´ë¶€ ë„êµ¬(Git, Docker, K8s, Terraform) ì„¤ì¹˜ ì‹œì‘
      win_shell: |
        VBoxManage startvm "{{ vm_name }}" --type headless
        # ì´ ë‹¨ê³„ ì´í›„ì—ëŠ” VM ë‚´ë¶€(Ubuntu)ì—ì„œ ì•„ë˜ ì‘ì—…ì´ ìˆ˜í–‰ë˜ì–´ì•¼ í•©ë‹ˆë‹¤:
        # 1. sudo mount /dev/cdrom /mnt
        # 2. sudo /mnt/VBoxLinuxAdditions.run
        # 3. apt install git docker.io terraform kubectl ...

```

---

### 3. ê²°ê³¼ í™•ì¸ ë° ê²€ì¦

1. **ê²ŒìŠ¤íŠ¸ ì—ë””ì…˜ í™•ì¸**: VM ì‹¤í–‰ í›„ ì„¤ì • ì°½ì˜ 'ì €ì¥ì†Œ' ì„¹ì…˜ì—ì„œ `VBoxGuestAdditions.iso`ê°€ CD/DVD ë“œë¼ì´ë¸Œì— ì‚½ì…ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.
2. **í™•ì¥íŒ© í™•ì¸**: í˜¸ìŠ¤íŠ¸ í„°ë¯¸ë„ì—ì„œ `VBoxManage list extpacks` ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ì—¬ "Oracle VM VirtualBox Extension Pack"ì´ ë‚˜ì˜¤ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.
3. **ì„œë¹„ìŠ¤ í™•ì¸**: VM ë‚´ë¶€ì—ì„œ `lsmod | grep vbox` ëª…ë ¹ì–´ë¥¼ í†µí•´ ê²ŒìŠ¤íŠ¸ ì—ë””ì…˜ ë“œë¼ì´ë²„ê°€ ë¡œë“œë˜ì—ˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

---

### ğŸ’¡ ë¹„ìš© ë° ìš´ì˜ ìœ ì˜ì‚¬í•­

* **ë¦¬ì†ŒìŠ¤ í• ë‹¹**: ìˆ˜ì‹­ ëŒ€ì˜ PCì— ê° 4GB ë©”ëª¨ë¦¬ì˜ VMì„ ë„ìš°ë©´ í˜¸ìŠ¤íŠ¸ PCì˜ ê°€ìš© ìì›ì„ ë§ì´ ì†Œëª¨í•©ë‹ˆë‹¤. í˜¸ìŠ¤íŠ¸ ìš´ì˜ì²´ì œì˜ ì•ˆì •ì„±ì„ ìœ„í•´ ì „ì²´ ë©”ëª¨ë¦¬ì˜ 50% ì´ìƒì„ VMì— í• ë‹¹í•˜ì§€ ì•ŠëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.
* **ë¬´ë£Œ/ìœ ë£Œ êµ¬ë¶„**:
* **VirtualBox / ê²ŒìŠ¤íŠ¸ ì—ë””ì…˜**: ì˜¤í”ˆì†ŒìŠ¤ ë° ë¬´ë£Œ.
* **í™•ì¥íŒ© (Extension Pack)**: ê°œì¸ìš©ì€ ë¬´ë£Œì´ë‚˜ ê¸°ì—…ìš©ì€ ìœ ë£Œ ë¼ì´ì„ ìŠ¤ ê²€í†  í•„ìš”.
* **AWS í™˜ê²½**: Windows ê¸°ë°˜ Bare Metal ì¸ìŠ¤í„´ìŠ¤ ì‚¬ìš© ì‹œ ìƒë‹¹í•œ **ë¹„ìš©(ì‹œê°„ë‹¹ ìˆ˜ ë‹¬ëŸ¬ ì´ìƒ)**ì´ ë°œìƒí•˜ë¯€ë¡œ ì‹¤ìŠµ í›„ ì¸ìŠ¤í„´ìŠ¤ ì¢…ë£Œë¥¼ ìŠì§€ ë§ˆì„¸ìš”.



---

**Next Step:** VM ë‚´ë¶€(Ubuntu) ìë™ ë¡œê·¸ì¸ì„ í†µí•œ ê²ŒìŠ¤íŠ¸ ì—ë””ì…˜ ìë™ ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±

ìœ„ êµ¬ì¡°ë¥¼ ë°”íƒ•ìœ¼ë¡œ, VMì´ ì¼œì§€ìë§ˆì ìë™ìœ¼ë¡œ ë§ˆìš´íŠ¸ëœ ISOë¥¼ ì‹¤í–‰í•˜ì—¬ ê²ŒìŠ¤íŠ¸ ì—ë””ì…˜ ì„¤ì¹˜ë¥¼ ë§ˆë¬´ë¦¬í•˜ëŠ” ì‰˜ ìŠ¤í¬ë¦½íŠ¸ ì—°ë™ì´ í•„ìš”í•˜ì‹œë©´ ë§ì”€í•´ ì£¼ì„¸ìš”. ì „ì²´ í”„ë¡œì íŠ¸ì— ë°˜ì˜í•´ ë“œë¦¬ê² ìŠµë‹ˆë‹¤.
