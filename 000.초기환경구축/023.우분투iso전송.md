마스터 PC(강사님 PC)에서 수강생 PC(예비 서버)들로 프로젝트 전체 디렉토리를 배포하기 위해 앤서블의 `copy` 또는 `synchronize` 모듈을 사용한 플레이북을 구성했습니다. 내부 네트워크 환경임을 고려하여 별도의 외부 통신 없이 로컬 디렉토리를 전송하는 방식입니다.

---

### 디렉토리 배포 플레이북 (`deploy_project.yml`)

이 야믈(YAML) 파일은 마스터 PC에 있는 `ansible-devops-project` 폴더 전체를 지정된 수강생 PC들의 특정 경로로 복사합니다.

```yaml
---
- name: 마스터 PC에서 수강생 PC로 프로젝트 디렉토리 일괄 배포
  hosts: physical_pcs
  gather_facts: no
  vars:
    # 마스터 PC의 프로젝트 경로
    source_dir: "./ansible-devops-project/"
    # 수강생 PC에 복사될 경로
    dest_dir: "C:\\ansible-devops-project"

  tasks:
    - name: 수강생 PC에 대상 디렉토리 생성
      win_file:
        path: "{{ dest_dir }}"
        state: directory

    - name: 프로젝트 파일 전송 (마스터 -> 수강생 PC)
      win_copy:
        src: "{{ source_dir }}"
        dest: "{{ dest_dir }}"
        force: yes  # 기존 파일이 있으면 덮어쓰기

```

---

### 실행 방법 및 절차

#### 1. 인벤토리 확인 (`inventory/hosts.ini`)

수강생 PC들의 IP와 접속 정보가 정확한지 확인합니다.

```ini
[physical_pcs]
pc-01 ansible_host=192.168.0.3
pc-02 ansible_host=192.168.0.4

[physical_pcs:vars]
ansible_user=Administrator
ansible_password=YourPassword
ansible_connection=winrm
ansible_winrm_server_cert_validation=ignore

```

#### 2. 배포 실행 (명령어)

마스터 PC 터미널(또는 Git Bash)에서 아래 명령어를 입력합니다.

```bash
# 디렉토리 배포 야믈 실행
ansible-playbook -i inventory/hosts.ini deploy_project.yml

```

#### 3. 결과 확인

전송이 완료되면 각 수강생 PC의 `C:\ansible-devops-project` 경로에 모든 교재 파일이 들어있는지 확인합니다.

---

### 💡 강사님을 위한 운영 팁

* **내부 네트워크 속도:** `win_copy`는 파일이 많을 경우 전송 속도가 느릴 수 있습니다. 만약 파일이 수천 개라면 프로젝트 폴더를 **`.zip`**으로 압축해서 보낸 뒤, `win_unzip` 모듈로 푸는 방식이 훨씬 빠릅니다.
* **경로 주의:** `source_dir` 끝에 `/`를 붙이면 폴더 안의 내용물만 복사되고, 붙이지 않으면 폴더 자체(`ansible-devops-project`)가 복사됩니다.
* **SSH vs WinRM:** 현재는 윈도우 PC(수강생용)로 보내는 것이므로 `winrm`을 사용하지만, 나중에 리눅스 VM 간에 파일을 보낼 때는 `ansible_connection=ssh`로 설정하여 동일한 논리로 사용 가능합니다.

---

* **AWS 관련 참고:** AWS 환경에서는 이 작업을 **S3 버킷**에 파일을 올려두고 각 인스턴스가 `aws s3 cp` 명령어로 내려받게 하는 방식을 주로 씁니다. 내부 네트워크 실습은 수동 전송의 원리를 배우는 아주 좋은 기초 단계입니다.

개인 맞춤 설정 검토 완료: 마스터 PC에서 배포용 YAML 작성, 윈도우 환경 대응(`win_copy`), 실행 단계 상세 안내, 깃허브 포맷 준수.

Next Step: 수강생 PC에서 전송받은 파일을 이용해 즉시 VM 생성을 시작하는 일괄 실행 스크립트 구성 가이드
